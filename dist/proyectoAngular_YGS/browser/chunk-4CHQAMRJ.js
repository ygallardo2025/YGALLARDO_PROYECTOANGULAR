import{c as F,e as M,i as N}from"./chunk-EEOFZTEV.js";import{a as L}from"./chunk-G2WS7ZM2.js";import{a as A,b as u,c as R,d as T,e as q,g as D,h as P,l as G,m as j}from"./chunk-CF6JDDZ2.js";import{g as x,i as w}from"./chunk-S7ZWUZXC.js";import{$a as c,Ca as d,Ga as C,La as f,Ya as m,Za as n,_a as i,hb as E,ib as S,pb as g,qb as o,rb as y,sb as I,xa as r}from"./chunk-6F7WF5WO.js";function k(t,a){t&1&&(n(0,"div",11),o(1,"Email requerido"),i())}function U(t,a){t&1&&(n(0,"div",11),o(1,"Email inv\xE1lido"),i())}function V(t,a){t&1&&(n(0,"div",11),o(1,"Contrase\xF1a requerida"),i())}function O(t,a){t&1&&(n(0,"div",11),o(1,"M\xEDnimo 4 caracteres"),i())}function $(t,a){if(t&1&&(n(0,"div",12),o(1),i()),t&2){let l=S();r(),y(l.errorMsg)}}var B=class t{constructor(a,l,e,s){this.fb=a;this.auth=l;this.router=e;this.route=s;this.form=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(4)]]})}RoutePath=N;form;loading=!1;errorMsg=null;onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;this.errorMsg=null,this.loading=!0;let{email:a,password:l}=this.form.value;this.auth.login(a,l).subscribe({next:()=>{let e=this.route.snapshot.queryParamMap.get("returnUrl")||"/dashboard";this.router.navigateByUrl(e)},error:e=>{this.errorMsg=e?.message||"No se pudo iniciar sesi\xF3n",this.loading=!1}})}static \u0275fac=function(l){return new(l||t)(d(G),d(L),d(M),d(F))};static \u0275cmp=C({type:t,selectors:[["app-login"]],decls:20,vars:12,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow-sm","p-4",2,"max-width","420px","width","100%"],[1,"mb-3","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","email",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["class","text-danger small mt-2",4,"ngIf"],[1,"invalid-feedback"],[1,"text-danger","small","mt-2"]],template:function(l,e){if(l&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),o(3,"Iniciar sesi\xF3n"),i(),n(4,"form",3),E("ngSubmit",function(){return e.onSubmit()}),n(5,"div",4)(6,"label",5),o(7,"Email"),i(),c(8,"input",6),f(9,k,2,0,"div",7)(10,U,2,0,"div",7),i(),n(11,"div",4)(12,"label",5),o(13,"Contrase\xF1a"),i(),c(14,"input",8),f(15,V,2,0,"div",7)(16,O,2,0,"div",7),i(),n(17,"button",9),o(18),i(),f(19,$,2,1,"div",10),i()()()),l&2){let s,v,h,p,_,b;r(4),m("formGroup",e.form),r(4),g("is-invalid",((s=e.form.get("email"))==null?null:s.invalid)&&((s=e.form.get("email"))==null?null:s.touched)),r(),m("ngIf",(v=e.form.get("email"))==null?null:v.hasError("required")),r(),m("ngIf",(h=e.form.get("email"))==null?null:h.hasError("email")),r(4),g("is-invalid",((p=e.form.get("password"))==null?null:p.invalid)&&((p=e.form.get("password"))==null?null:p.touched)),r(),m("ngIf",(_=e.form.get("password"))==null?null:_.hasError("required")),r(),m("ngIf",(b=e.form.get("password"))==null?null:b.hasError("minlength")),r(),m("disabled",e.loading||e.form.invalid),r(),I(" ",e.loading?"Ingresando...":"Ingresar"," "),r(),m("ngIf",e.errorMsg)}},dependencies:[w,x,j,q,A,R,T,D,P],styles:[".card[_ngcontent-%COMP%]{border-radius:14px}"]})};export{B as LoginComponent};
