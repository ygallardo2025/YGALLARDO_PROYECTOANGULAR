import{a as Q,b as ee,d as te,e as A,f as ne,g as ie,h as oe,i as I}from"./chunk-EEOFZTEV.js";import{a as d}from"./chunk-G2WS7ZM2.js";import{g as w,h as y,i as S,o as X,p as Y}from"./chunk-S7ZWUZXC.js";import{$a as m,Ab as K,F as B,Ga as h,La as g,N as G,T as z,Y as p,Ya as l,Za as r,_a as o,ba as R,ca as $,db as _,eb as C,gb as F,hb as P,ia as q,ib as c,j as V,ob as H,pb as k,qb as s,r as E,rb as W,s as T,tb as Z,vb as x,wb as b,xa as a,xb as v,y as j,yb as J}from"./chunk-6F7WF5WO.js";var M=(t,i)=>{let e=p(d),n=p(A);return e.isAuthenticated()?!0:(n.navigate(["/","login"],{queryParams:{returnUrl:i.url}}),!1)};var re=(t,i)=>{let e=p(d),n=p(A);return e.isAuthenticated()&&e.hasRole("admin")?!0:(n.navigate(["/","dashboard"]),!1)};var ae=[{path:"login",data:{title:"Login"},loadComponent:()=>import("./chunk-4CHQAMRJ.js").then(t=>t.LoginComponent)},{path:"dashboard",data:{toolbarTitle:"Dashboard"},canActivate:[M],loadComponent:()=>import("./chunk-4JEID35C.js").then(t=>t.Dashboard)},{path:"students",data:{toolbarTitle:"Estudiantes"},canActivate:[M],loadComponent:()=>import("./chunk-XJGKIM3J.js").then(t=>t.StudentsManagerComponent)},{path:"cursos",data:{toolbarTitle:"Cursos"},canActivate:[M],loadComponent:()=>import("./chunk-XL6HBKNT.js").then(t=>t.CoursesComponent)},{path:"inscripciones",data:{toolbarTitle:"Inscripciones"},canActivate:[M],loadComponent:()=>import("./chunk-7EB5LE5N.js").then(t=>t.EnrollmentsManagerComponent)},{path:"usuarios",data:{toolbarTitle:"Usuarios"},canActivate:[M,re],loadComponent:()=>import("./chunk-6RNT7WMS.js").then(t=>t.UsersManagerComponent)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];var se={providers:[q(),K(),oe(ae),X(Y())]};var u=class t{_sidebarOpen$=new V(!0);sidebarOpen$=this._sidebarOpen$.asObservable();toggleSidebar(){this._sidebarOpen$.next(!this._sidebarOpen$.value)}openSidebar(){this._sidebarOpen$.next(!0)}closeSidebar(){this._sidebarOpen$.next(!1)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};function me(t,i){if(t&1){let e=F();_(0),r(1,"span",9),s(2),o(),r(3,"button",10),P("click",function(){R(e);let f=c(2);return $(f.logout())}),s(4,"Cerrar sesi\xF3n"),o(),C()}if(t&2){let e=c().ngIf;a(2),Z(" ",e.user==null?null:e.user.name," (",e.user==null?null:e.user.role,") ")}}function ce(t,i){if(t&1){let e=F();r(0,"button",10),P("click",function(){R(e);let f=c(2);return $(f.login())}),s(1,"Iniciar sesi\xF3n"),o()}}function de(t,i){if(t&1&&(_(0),r(1,"div",7),g(2,me,5,2,"ng-container",8)(3,ce,2,0,"ng-template",null,0,J),o(),C()),t&2){let e=i.ngIf,n=H(4);a(2),l("ngIf",e.isAuthenticated)("ngIfElse",n)}}var D=class t{router=p(A);layout=p(u);auth=p(d);vm$;ngOnInit(){let i=this.router.events.pipe(j(e=>e instanceof ee),G(null),E(()=>{let e=this.router.routerState.root;for(;e.firstChild;)e=e.firstChild;return e.snapshot.data?.toolbarTitle||"Aplicaci\xF3n"}),B());this.vm$=T([i,this.auth.currentUser$]).pipe(E(([e,n])=>({title:e,user:n,isAuthenticated:!!n})))}toggleSidebar(){this.layout.toggleSidebar()}login(){this.router.navigate(["/login"])}logout(){this.auth.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-toolbar"]],decls:9,vars:6,consts:[["loginBtn",""],[1,"app-toolbar","d-flex","align-items-center","px-3"],["aria-label","Alternar men\xFA",1,"btn","btn-outline-light","me-2",3,"click"],[1,"bi","bi-list"],[1,"flex-grow-1"],[1,"mb-0"],[4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[4,"ngIf","ngIfElse"],[1,"small","opacity-75","d-none","d-md-inline"],[1,"btn","btn-light","btn-sm",3,"click"]],template:function(e,n){if(e&1&&(r(0,"header",1)(1,"button",2),P("click",function(){return n.toggleSidebar()}),m(2,"i",3),o(),r(3,"div",4)(4,"h5",5),s(5),b(6,"async"),o()(),g(7,de,5,2,"ng-container",6),b(8,"async"),o()),e&2){let f;a(5),W((f=v(6,2,n.vm$))==null?null:f.title),a(2),l("ngIf",v(8,4,n.vm$))}},dependencies:[S,w,y],styles:[".app-toolbar[_ngcontent-%COMP%]{height:var(--toolbar-h);background:#0d6efd;color:#fff;box-shadow:0 2px 6px #0000000f;position:sticky;position:fixed;top:0;left:0;right:0;z-index:1030}"],changeDetection:0})};var O=t=>["/",t];function ue(t,i){if(t&1&&(r(0,"li",5)(1,"a",6),m(2,"i",12),s(3," Usuarios "),o()()),t&2){let e=c(3);a(),l("routerLink",x(1,O,e.RoutePath.Users))}}function fe(t,i){if(t&1&&(_(0),r(1,"ul",4)(2,"li",5)(3,"a",6),m(4,"i",7),s(5," Dashboard "),o()(),r(6,"li",5)(7,"a",6),m(8,"i",8),s(9," Estudiantes "),o()(),r(10,"li",5)(11,"a",6),m(12,"i",9),s(13," Cursos "),o()(),r(14,"li",5)(15,"a",6),m(16,"i",10),s(17," Inscripciones "),o()(),g(18,ue,4,3,"li",11),o(),C()),t&2){let e=c().ngIf,n=c();a(3),l("routerLink",x(5,O,n.RoutePath.Dashboard)),a(4),l("routerLink",x(7,O,n.RoutePath.Students)),a(4),l("routerLink",x(9,O,n.RoutePath.Courses)),a(4),l("routerLink",x(11,O,n.RoutePath.Enrollments)),a(3),l("ngIf",e.isAdmin)}}function ge(t,i){if(t&1&&(_(0),r(1,"aside",1)(2,"div",2)(3,"h4",3),s(4,"Men\xFA"),o()(),g(5,fe,19,13,"ng-container",0),o(),C()),t&2){let e=i.ngIf;a(),k("open",e.isOpen),a(4),l("ngIf",e.isAuthenticated)}}var N=class t{layout=p(u);auth=p(d);RoutePath=I;vm$;ngOnInit(){this.vm$=T([this.layout.sidebarOpen$,this.auth.currentUser$]).pipe(E(([i,e])=>({isOpen:i,isAuthenticated:!!e,isAdmin:e?.role==="admin"})))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-navbar"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"sidebar","text-white","p-3"],[1,"sidebar-header","mb-4"],[1,"fw-bold"],[1,"nav","flex-column"],[1,"nav-item","mb-2"],["routerLinkActive","active",1,"nav-link","text-white",3,"routerLink"],[1,"bi","bi-grid-fill","me-2"],[1,"bi","bi-people-fill","me-2"],[1,"bi","bi-book-half","me-2"],[1,"bi","bi-card-checklist","me-2"],["class","nav-item mb-2",4,"ngIf"],[1,"bi","bi-person-gear","me-2"]],template:function(e,n){e&1&&(g(0,ge,6,3,"ng-container",0),b(1,"async")),e&2&&l("ngIf",v(1,1,n.vm$))},dependencies:[S,w,ne,ie,y],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;top:var(--toolbar-h);left:0;width:260px;height:calc(100vh - 56px);background:#0d6efd;transform:translate(-100%);transition:transform .2s ease;z-index:1020;overflow-y:auto}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{opacity:.95}"],changeDetection:0})};var L=class t{layout=p(u);sidebarOpen$=this.layout.sidebarOpen$;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-root"]],decls:13,vars:4,consts:[[1,"app-main"],[1,"content"],[1,"footer","mt-4"],[1,"text-center"]],template:function(e,n){e&1&&(m(0,"app-toolbar")(1,"app-navbar"),r(2,"main",0),b(3,"async"),r(4,"div",1),m(5,"router-outlet"),r(6,"div",2)(7,"p",3),s(8,"\xA9 2025 Proyecto Angular - Estudiantes"),o(),r(9,"p",3),s(10,"Desarrollado por ygallardo"),o(),r(11,"p",3),s(12,"Todos los derechos reservados"),o()()()()),e&2&&(a(2),k("shift",v(3,2,n.sidebarOpen$)??!1))},dependencies:[S,te,D,N,y],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--toolbar-h: 56px;--sidebar-w: 260px}.app-main[_ngcontent-%COMP%]{padding-top:var(--toolbar-h);background:#f9f7fa;min-height:100vh;transition:padding-left .2s ease}@media (min-width: 992px){.app-main.shift[_ngcontent-%COMP%]{padding-left:var(--sidebar-w)}}.content[_ngcontent-%COMP%]{padding:2rem}'],changeDetection:0})};Q(L,se).catch(t=>console.error(t));
