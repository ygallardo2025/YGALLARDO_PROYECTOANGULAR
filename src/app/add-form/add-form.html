<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header" [ngClass]="estudiante ? 'bg-success' : 'bg-primary'">
      <h4 class="mb-0">{{ estudiante ? 'Editar Estudiante' : 'Añadir Estudiante' }}</h4>
    </div>
    <div class="card-body">
      <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">

        <!-- DNI -->
        <div class="mb-3">
          <label for="dni" class="form-label">DNI:</label>
          <input
            type="text"
            id="dni"
            class="form-control"
            formControlName="dni"
            [class.is-invalid]="studentForm.get('dni')?.invalid && studentForm.get('dni')?.touched"
            placeholder="Ingrese el DNI" />
          <div class="invalid-feedback" *ngIf="getErrorMessage('dni')">
            {{ getErrorMessage('dni') }}
          </div>
        </div>

        <!-- Nombre -->
        <div class="mb-3">
          <label for="name" class="form-label">Nombre:</label>
          <input
            type="text"
            id="name"
            class="form-control"
            formControlName="name"
            [class.is-invalid]="studentForm.get('name')?.invalid && studentForm.get('name')?.touched"
            placeholder="Ingrese el nombre" />
          <div class="invalid-feedback" *ngIf="getErrorMessage('name')">
            {{ getErrorMessage('name') }}
          </div>
        </div>

        <!-- Apellido -->
        <div class="mb-3">
          <label for="surname" class="form-label">Apellido:</label>
          <input
            type="text"
            id="surname"
            class="form-control"
            formControlName="surname"
            [class.is-invalid]="studentForm.get('surname')?.invalid && studentForm.get('surname')?.touched"
            placeholder="Ingrese el apellido" />
          <div class="invalid-feedback" *ngIf="getErrorMessage('surname')">
            {{ getErrorMessage('surname') }}
          </div>
        </div>

        <!-- Edad -->
        <div class="mb-3">
          <label for="age" class="form-label">Edad:</label>
          <input
            type="number"
            id="age"
            class="form-control"
            formControlName="age"
            [class.is-invalid]="studentForm.get('age')?.invalid && studentForm.get('age')?.touched"
            placeholder="Ingrese la edad" />
          <div class="invalid-feedback" *ngIf="getErrorMessage('age')">
            {{ getErrorMessage('age') }}
          </div>
        </div>

        <!-- Promedio -->
        <div class="mb-3">
          <label for="average" class="form-label">Promedio:</label>
          <input
            type="number"
            id="average"
            class="form-control"
            formControlName="average"
            [class.is-invalid]="studentForm.get('average')?.invalid && studentForm.get('average')?.touched"
            placeholder="Ingrese el promedio" step="0.01" />
          <div class="invalid-feedback" *ngIf="getErrorMessage('average')">
            {{ getErrorMessage('average') }}
          </div>
        </div>

        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-primary" [disabled]="studentForm.invalid">
            {{ estudiante ? 'Guardar Cambios' : 'Añadir Estudiante' }}
          </button>

          <button type="button" class="btn btn-secondary" (click)="onReset()">
            Limpiar
          </button>

          <button *ngIf="estudiante" type="button" class="btn btn-outline-danger" (click)="onCancelEdit()">
            Cancelar Edición
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
