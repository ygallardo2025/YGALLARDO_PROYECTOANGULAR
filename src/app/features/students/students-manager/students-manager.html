<div class="container mt-4" *ngIf="vm$ | async as vm">
  <!-- Encabezado -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Listado de estudiantes</h4>
    <button class="btn btn-primary" (click)="nuevoEstudiante()" [disabled]="!vm.canEdit">
      AÃ±adir estudiante
    </button>
  </div>

  <!-- Tabla -->
  <app-students-table
    [students]="vm.students"
    [canEdit]="vm.canEdit"
    (editar)="onEditar($event)"
    (eliminar)="onEliminar($event)">
  </app-students-table>

  <!-- Formulario (editar o agregar) -->
  <div class="card mt-4" *ngIf="estudianteEditando">
    <div class="card-body">
      <h5 class="card-title">
        {{ estudianteEditando.id === 0 ? 'AÃ±adir estudiante' : 'Editar estudiante' }}
      </h5>

      <app-student-form
        [student]="estudianteEditando"
        (save)="onGuardarEditado($event)">
      </app-student-form>
    </div>
  </div>
</div>
